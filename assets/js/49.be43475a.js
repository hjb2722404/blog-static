(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{213:function(s,a,t){"use strict";t.r(a);var n=t(0),l=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("div",{staticClass:"content"},[t("p",[t("strong",[s._v("情况描述：")])]),s._v(" "),t("p",[s._v("后台那边是JAVA，需要我从前台Ajax传递数据，数据包含一些表单字段，和一个json二维数组，使用的是jquery $.ajax跨域方法。")]),s._v(" "),t("pre",{staticClass:"prettyprint"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" "),t("span",{staticClass:"hljs-variable"},[s._v("$dataStr")]),s._v(" = {\n        "),t("span",{staticClass:"hljs-string"},[s._v('"name"')]),s._v(": "),t("span",{staticClass:"hljs-variable"},[s._v("$name")]),s._v(",\n        "),t("span",{staticClass:"hljs-string"},[s._v('"phone"')]),s._v(": "),t("span",{staticClass:"hljs-variable"},[s._v("$phone")]),s._v(",\n        "),t("span",{staticClass:"hljs-string"},[s._v('"trainNum"')]),s._v(": "),t("span",{staticClass:"hljs-variable"},[s._v("$trainNum")]),s._v(",\n        "),t("span",{staticClass:"hljs-string"},[s._v('"coach"')]),s._v(": "),t("span",{staticClass:"hljs-variable"},[s._v("$coach")]),s._v(",\n        "),t("span",{staticClass:"hljs-string"},[s._v('"seatNum"')]),s._v(": "),t("span",{staticClass:"hljs-variable"},[s._v("$seatNum")]),s._v(",\n        "),t("span",{staticClass:"hljs-string"},[s._v('"remark"')]),s._v(": "),t("span",{staticClass:"hljs-variable"},[s._v("$remark")]),s._v(",\n        "),t("span",{staticClass:"hljs-string"},[s._v('"menusStr"')]),s._v(":"),t("span",{staticClass:"hljs-variable"},[s._v("$menusStr")]),s._v(" "),t("span",{staticClass:"hljs-comment"},[s._v("//这个是二维数组字符串")]),s._v("\n    }\n    $.ajax({\n        type:"),t("span",{staticClass:"hljs-string"},[s._v('"get"')]),s._v(",\n        url:"),t("span",{staticClass:"hljs-string"},[s._v('"ip:port/ordering/orderManager/addOrder"')]),s._v(",\n        data:"),t("span",{staticClass:"hljs-variable"},[s._v("$dataStr")]),s._v(",\n        dataType:"),t("span",{staticClass:"hljs-string"},[s._v("'jsonp'")]),s._v(",\n        async:"),t("span",{staticClass:"hljs-keyword"},[s._v("false")]),s._v(",\n        jsonp:"),t("span",{staticClass:"hljs-string"},[s._v("'callback'")]),s._v(",\n        jsonpCallback:"),t("span",{staticClass:"hljs-string"},[s._v("'callback'")]),s._v(",\n        success:"),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),t("span",{staticClass:"hljs-params"},[s._v("(json)")]),s._v("{")]),s._v("\n           "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v("(json.result){\n               alert("),t("span",{staticClass:"hljs-string"},[s._v('"订餐成功，等待送餐"')]),s._v(");\n           }"),t("span",{staticClass:"hljs-keyword"},[s._v("else")]),s._v("{\n               alert("),t("span",{staticClass:"hljs-string"},[s._v('"抱歉，订餐失败，请联系服务员"')]),s._v(");\n           }\n        },\n        complete:"),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),t("span",{staticClass:"hljs-params"},[s._v("()")]),s._v("{")]),s._v("\n\n        },\n        error:"),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),t("span",{staticClass:"hljs-params"},[s._v("(e)")]),s._v("{")]),s._v("\n            alert("),t("span",{staticClass:"hljs-string"},[s._v('"数据加载失败"')]),s._v(");\n            alert(e);\n        }\n\n    });")]),s._v(" "),t("p",[s._v("其中 $menusStr是一个JSON二维数组字符串，之前的写法是：")]),s._v(" "),t("pre",{staticClass:"prettyprint"},[s._v("// $menus"),t("span",{staticClass:"hljs-variable"},[s._v("Str")]),s._v("='["),t("span",{staticClass:"hljs-tuple"},[s._v("{"),t("span",{staticClass:"hljs-string"},[s._v('"a"')]),s._v(":"),t("span",{staticClass:"hljs-number"},[s._v("3")]),s._v(","),t("span",{staticClass:"hljs-string"},[s._v('"b"')]),s._v(":"),t("span",{staticClass:"hljs-string"},[s._v('"33"')]),s._v("}")]),s._v(","),t("span",{staticClass:"hljs-tuple"},[s._v("{"),t("span",{staticClass:"hljs-string"},[s._v('"d"')]),s._v(":"),t("span",{staticClass:"hljs-string"},[s._v('"vv"')]),s._v(","),t("span",{staticClass:"hljs-string"},[s._v('"c"')]),s._v(":"),t("span",{staticClass:"hljs-number"},[s._v("55")]),s._v("}")]),s._v("]';")]),s._v(" "),t("p",[s._v("然后发现后台那边其他字段都可以接收到，唯独 ‘"),t("span",[s._v("$")]),s._v("menusStr’为null，百思不得其解，然后利用json格式校验工具校验，发现整个’"),t("span",[s._v("$")]),s._v("dataStr’格式无法通过校验。")]),s._v(" "),t("p",[s._v("后来改成如下格式，通过了验证，并且后台接收成功：")]),s._v(" "),t("pre",{staticClass:"prettyprint"},[s._v(" $menusStr="),t("span",{staticClass:"hljs-string"},[s._v("\"[{'")]),t("span",{staticClass:"hljs-transposed_variable"},[s._v("a'")]),s._v(":"),t("span",{staticClass:"hljs-number"},[s._v("3")]),s._v(","),t("span",{staticClass:"hljs-string"},[s._v("'b'")]),s._v(":"),t("span",{staticClass:"hljs-string"},[s._v("'33'")]),s._v("},{"),t("span",{staticClass:"hljs-string"},[s._v("'d'")]),s._v(":"),t("span",{staticClass:"hljs-string"},[s._v("'vv'")]),s._v(","),t("span",{staticClass:"hljs-string"},[s._v("'c'")]),s._v(":"),t("span",{staticClass:"hljs-number"},[s._v("55")]),s._v("}]"),t("span",{staticClass:"hljs-string"},[s._v('";')])]),s._v(" "),t("p",[s._v("虽然问题解决，但是原因不详，因为json官方的多维数组写法是第一种那种，但就是不行，这个问题在这里做标记，等工作忙完好好研究一下。")])])}],!1,null,null,null);l.options.__file="2016-05-31-jquery ajax传递的data参数中带json多维数组字符串.md";a.default=l.exports}}]);